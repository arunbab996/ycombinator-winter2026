<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23ffffff'/><path d='M30 50 L70 50 M50 30 L50 70' stroke='%23000000' stroke-width='8'/></svg>">
<title>DiscoveryOS</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

<style>
:root{
  /* MATTE BLACK PALETTE */
  --bg:#000000;
  --bg-elevated:#070707;
  --bg-card:#0A0A0A;
  --border:#1A1A1A;
  --border-soft:#121212;

  --text:#F4F4F5;
  --text-soft:#A1A1AA;
  --text-softer:#52525B;

  --accent:#F97316;
  --accent-soft:#F9B57A;
  --accent-link:#E4E4E7;

  --yc-pill-bg:rgba(249,115,22,0.1);
  --yc-pill-border:rgba(249,115,22,0.3);

  /* FONTS */
  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;

  font-family: var(--font-sans);
}

*{box-sizing:border-box;}

html,body{
  margin:0;
  padding:0;
  min-height:100vh;
  /* PURE MATTE BLACK BACKGROUND */
  background-color:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
}

body{
  display:flex;
  flex-direction:column;
}

/* WIDE LAYOUT */
.app{
  flex:1;
  width:100%;
  max-width: 1400px;
  margin:24px auto 32px auto;
  padding:0 28px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* HEADER */
.app-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  margin-bottom: 6px;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
}

/* RESTORED ORIGINAL LOGO */
.brand-mark{
  position:relative;
  width:32px;
  height:32px;
  border-radius:10px;
  border:1px solid #262626;
  background:#050505;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:16px;
  color:#E5E5E5;
  overflow:hidden;
  font-family: var(--font-mono);
}

/* subtle grid lines inside mark */
.brand-mark::before{
  content:""; position:absolute; width:18px; height:1px;
  background:#141414; box-shadow:0 4px 0 #141414;
}
.brand-mark::after{
  content:""; position:absolute; width:1px; height:18px;
  background:#141414; box-shadow:4px 0 0 #141414;
}

.brand-text{
  display:flex;
  flex-direction:column;
  gap:2px;
}

.brand-name{
  font-size:14px;
  letter-spacing:0.24em; /* Original spacing */
  text-transform: uppercase;
  font-weight:600;
  color:#F4F4F5;
}

.brand-sub{
  font-size:11px;
  color:var(--text-softer);
}

.app-meta{
  font-family: var(--font-mono);
  font-size:10px;
  color:var(--text-soft);
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:4px;
}

.app-meta-pill{
  border-radius:999px;
  padding:4px 10px;
  border:1px solid var(--border);
  background:#050505;
  display:flex;
  align-items:center;
  gap:6px;
}
.app-meta-dot{
  width:6px;
  height:6px;
  border-radius:999px;
  background:#22C55E;
  box-shadow: 0 0 6px rgba(34, 197, 94, 0.4);
}

/* STICKY GLASS TOOLBAR */
.toolbar{
  position: sticky;
  top: 10px;
  z-index: 100;
  background: rgba(5, 5, 5, 0.85);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius:12px;
  border:1px solid var(--border);
  padding:10px 12px 12px 16px;
  display:flex;
  align-items:center;
  gap:10px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.6);
}

.toolbar-main{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:6px;
}

.search-label{
  font-size:11px;
  font-weight:600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-softer);
}

.search-wrap{
  display:flex;
  align-items:center;
  gap:10px;
}

.search-box{
  position:relative;
  flex:1;
}

.search-box input{
  width:100%;
  padding:8px 10px 8px 28px;
  border-radius:8px;
  border:1px solid var(--border);
  background:#0A0A0A;
  color:var(--text);
  font-family: var(--font-sans);
  font-size:13px;
  transition: all 0.2s;
}
.search-box input:focus{
  outline: none;
  border-color: #444;
  background: #111;
}
.search-box input::placeholder{
  color:#444;
}

.search-icon{
  position:absolute;
  left:10px;
  top:50%;
  transform:translateY(-50%);
  font-size:12px;
  color:var(--text-softer);
}

/* FILTER CHIPS */
.chips{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  font-family: var(--font-mono);
  font-size:10px;
}

.chip{
  padding:5px 10px;
  border-radius:6px;
  border:1px solid var(--border);
  background:#0A0A0A;
  color:var(--text-softer);
  cursor:pointer;
  transition: all 0.2s;
  letter-spacing: -0.02em;
}
.chip:hover{
  background: #141414;
  color: var(--text-soft);
}
.chip--on{
  background: #E4E4E7;
  border-color:#E4E4E7;
  color: #000;
  font-weight: 600;
  box-shadow: 0 0 10px rgba(255,255,255,0.15);
}

/* VIEW TOGGLE */
.view-toggle{
  display:flex;
  align-items:center;
  border-radius:8px;
  border:1px solid var(--border);
  background:#0A0A0A;
  padding: 2px;
}

.view-btn{
  padding:4px 10px;
  font-size:11px;
  border-radius: 6px;
  border:none;
  background:transparent;
  color:var(--text-softer);
  cursor:pointer;
  transition: all 0.2s;
  font-weight: 500;
}
.view-btn--active{
  background:#1A1A1A;
  color:var(--text);
}

/* FEED */
.feed{
  margin-top:10px;
  min-height: 400px;
}

/* SUMMARY BAR */
.summary{
  font-size:11px;
  font-family: var(--font-mono);
  color:var(--text-softer);
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 4px 8px;
  border-bottom:1px solid var(--border-soft);
  margin-bottom: 12px;
}

/* DATE GROUPS & ANIMATION */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.date-group{
  margin-top:16px;
  animation: fadeIn 0.4s ease-out forwards;
}
.date-header{
  font-family: var(--font-mono);
  font-size:10px;
  font-weight: 500;
  text-transform:uppercase;
  letter-spacing:0.05em;
  color:var(--text-softer);
  margin-bottom:8px;
  padding-left: 2px;
}

/* CARDS */
.card{
  display:flex;
  align-items:flex-start;
  gap:12px;
  padding:12px;
  border-radius:12px;
  
  /* GLASS & BORDER */
  background: rgba(10, 10, 10, 0.6);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  
  border: 1px solid transparent;
  box-shadow: 0 0 0 1px var(--border-soft);
  
  transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.card:hover{
  background: rgba(20, 20, 20, 0.8);
  transform: translateY(-2px);
  box-shadow: 
    0 4px 12px rgba(0,0,0,0.5), 
    0 0 0 1px #333;
  z-index: 1;
}

.card + .card{
  margin-top:8px;
}

.card-left{
  width:42px;
  height:42px;
  border-radius:8px;
  background:#111;
  border:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
  overflow:hidden;
}
.card-left img{
  width:100%;
  height:100%;
  object-fit:contain;
  padding: 4px; 
}
.card-left-fallback{
  font-family: var(--font-mono);
  font-size:14px;
  color:var(--text-soft);
}

.card-center{
  flex:1;
  min-width: 0;
}

.card-top-row{
  display:flex;
  align-items:flex-start;
  justify-content: space-between;
  gap:12px;
}

.card-main{
  flex:1;
  min-width:0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.card-name{
  font-size:14px;
  font-weight:600;
  color: #fff;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.card-tagline{
  font-size:13px;
  color:var(--text-soft);
  line-height:1.4;
  font-weight: 400;
}

/* ACTIONS */
.card-right{
  display:flex;
  flex-direction:column;
  gap:8px;
  align-items:flex-end;
}

.yc-pill{
  font-family: var(--font-mono);
  padding:3px 8px;
  border-radius:6px;
  font-size:10px;
  font-weight: 500;
  letter-spacing: 0.05em;
  background: transparent;
  border: 1px solid var(--yc-pill-border);
  color: #FB923C;
  box-shadow: 0 0 8px rgba(249, 115, 22, 0.1);
}

.btn-link{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:28px;
  height:28px;
  border-radius:8px;
  border:1px solid transparent;
  background:transparent;
  color:var(--text-softer);
  text-decoration:none;
  transition: all 0.2s;
}
.btn-link:hover{
  background: #1A1A1A;
  color: var(--text);
  border-color: #333;
}

.card-link-row{
  display:flex;
  align-items:center;
  gap:2px;
}

/* TABLE VIEW */
.table-view{
  width:100%;
  border-collapse:collapse;
  margin-top:8px;
  font-size:12px;
  animation: fadeIn 0.3s ease-out;
}

.table-view thead{
  background:#0A0A0A;
  border-bottom: 1px solid #222;
}

.table-view th{
  text-align:left;
  font-weight:500;
  color:var(--text-softer);
  font-family: var(--font-mono);
  font-size:10px;
  text-transform:uppercase;
  letter-spacing:0.05em;
  padding: 10px 12px;
}

.table-view td{
  padding: 10px 12px;
  border-bottom:1px solid var(--border-soft);
  color: var(--text-soft);
}

.table-company{
  font-weight:500;
  color: var(--text);
}

/* EMPTY & LOADING */
.empty{
  padding:60px 20px;
  font-size:13px;
  color:var(--text-softer);
  text-align:center;
  font-family: var(--font-mono);
}

/* SKELETON LOADING */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeleton-text {
  height: 12px;
  background: linear-gradient(90deg, #121212 25%, #1A1A1A 50%, #121212 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
}

.skeleton-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  border-radius: 12px;
  background: var(--bg-card);
  border: 1px solid var(--border-soft);
  margin-top: 8px;
}

.skeleton-img {
  width: 42px;
  height: 42px;
  border-radius: 8px;
  background: linear-gradient(90deg, #121212 25%, #1A1A1A 50%, #121212 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  flex-shrink: 0;
}

.skeleton-lines {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* FOOTER */
.footer{
  margin-top:auto;
  padding:20px 28px;
  font-size:11px;
  color:var(--text-softer);
  display:flex;
  justify-content:space-between;
  border-top: 1px solid var(--border-soft);
  background: var(--bg);
}
.footer a{
  color:var(--text-soft);
  text-decoration:none;
  transition: color 0.2s;
}
.footer a:hover{
  color: var(--text);
}

/* SCROLLBAR */
::-webkit-scrollbar{
  width:8px;
}
::-webkit-scrollbar-track{
  background:transparent;
}
::-webkit-scrollbar-thumb{
  background:#222;
  border-radius:999px;
  border: 2px solid var(--bg);
}
::-webkit-scrollbar-thumb:hover{
  background: #333;
}

/* RESPONSIVE */
@media (max-width:720px){
  .app{
    padding:0 16px 16px;
    margin-top: 16px;
  }
  .app-header{
    flex-direction:column;
    align-items:flex-start;
  }
  .toolbar{
    flex-direction:column;
    align-items:stretch;
  }
  .search-wrap{
    flex-wrap:wrap;
  }
  .card-top-row{
    flex-direction:column;
    align-items:flex-start;
  }
  .card-right{
    flex-direction:row;
    align-items:center;
    width: 100%;
    justify-content: space-between;
    margin-top: 6px;
  }
}
</style>
</head>

<body>
<div class="app">
  <header class="app-header">
    <div class="brand">
      <div class="brand-mark">▦</div>
      <div class="brand-text">
        <div class="brand-name">DISCOVERY OS</div>
        <div class="brand-sub">Market intelligence feed</div>
      </div>
    </div>
    <div class="app-meta">
      <div class="app-meta-pill">
        <span class="app-meta-dot"></span>
        <span id="last-updated">Syncing...</span>
      </div>
    </div>
  </header>

  <section class="toolbar">
    <div class="toolbar-main">
      <div class="search-label">Filter & Search</div>

      <div class="search-wrap">
        <div class="search-box">
          <span class="search-icon">⌕</span>
          <input id="search" type="text" placeholder="Search companies, taglines..." />
        </div>

        <div class="chips">
          <button class="chip chip--on" data-filter="all">All</button>
          <button class="chip" data-filter="yc">YC W26</button>
          <button class="chip" data-filter="ph">Product Hunt</button>
        </div>

        <div class="view-toggle">
          <button class="view-btn view-btn--active" data-view="cards">Cards</button>
          <button class="view-btn" data-view="table">Table</button>
        </div>
      </div>
    </div>
  </section>

  <section class="feed">
    <div class="summary">
      <span id="summary-text">Loading...</span>
      <span id="summary-breakdown"></span>
    </div>

    <div id="content"></div>
  </section>
</div>

<footer class="footer">
  <span>© DiscoveryOS. Internal scout feed.</span>
  <span>
    <a href="#">Docs</a> · <a href="#">Changelog</a>
  </span>
</footer>

<script>
/* CONFIG */
const SHEET_ID='1OaIx6CeopLNuiYQrDUurO_6B-cCHh3g2QMWtC7UDz5U';
const GID='1778821196';
const CSV_URL=`https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${GID}`;

let STATE={groups:{},search:"",source:"all",view:"cards"};

/* UTILITIES */
function debounce(func, wait) {
  let timeout;
  return function(...args) {
    clearTimeout(timeout);
    timeout = setTimeout(() => func.apply(this, args), wait);
  };
}

function splitCsvLine(line){
  const out=[];let cur='',q=false;
  for(let i=0;i<line.length;i++){
    const ch=line[i];
    if(ch==='\"'){
      if(q && line[i+1]==='\"'){cur+='"';i++;continue;}
      q=!q;continue;
    }
    if(ch===','&&!q){out.push(cur);cur='';continue;}
    cur+=ch;
  }
  out.push(cur);
  return out.map(s=>s.trim().replace(/^"|"$/g,''));
}

function csvToObjects(csv){
  const lines=csv.split(/\r?\n/).filter(x=>x.trim());
  if(!lines.length)return[];
  const h=splitCsvLine(lines[0]);
  return lines.slice(1).map(l=>{
    const cols=splitCsvLine(l);const o={};
    h.forEach((hh,i)=>o[hh]=cols[i]||'');
    return o;
  });
}

function pick(r,k){
  for(const x of k){
    if(x in r && r[x] && r[x].trim())return r[x].trim();
  }
  return"";
}

function favicon(u){
  try{
    if(!u)return null;
    const d=new URL(u.startsWith('http')?u:`https://${u}`).hostname;
    return `https://www.google.com/s2/favicons?sz=128&domain=${d}`;
  }catch{return null;}
}

function companyLogo(r){
  const s=pick(r,['source','Source']).toLowerCase(),
        logo=pick(r,['Logo URL','LogoURL','Logo_Url']),
        site=pick(r,['Website']);
  if(s==='ph'&&logo)return logo;
  return favicon(site);
}

function parseDate(r){
  const d=pick(r,['Extracted Date','ExtractedDate','Date']);
  const dt=new Date(d);
  return isNaN(dt)?d:dt.toISOString().slice(0,10);
}

function formatDate(d){
  const dt=new Date(d);
  return isNaN(dt)?d||'':
    dt.toLocaleDateString(undefined,{year:'numeric',month:'short',day:'2-digit'});
}

function groupByDate(rows){
  const g={};
  rows.forEach(r=>{
    const key=parseDate(r)||'Unknown';
    (g[key]=g[key]||[]).push(r);
  });
  return g;
}

function esc(s){
  return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

/* ICONS */
const siteIcon=`<svg width="14" height="14" viewBox="0 0 24 24"><path d="M9 5h10v10" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M9 15L19 5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M5 9v10h10" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
const ycIcon=`<svg width="14" height="14" viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="3" fill="#FF8A00"/><text x="12" y="15" text-anchor="middle" font-size="10" fill="#FFFFFF" font-family="system-ui, sans-serif" font-weight="bold">Y</text></svg>`;
const phIcon=`<svg width="14" height="14" viewBox="0 0 24 24"><circle cx="12" cy="12" r="9" fill="#FF6A00"/><path d="M10 8h3.2a2.8 2.8 0 0 1 0 5.6H10V8z" fill="#FFFFFF"/><rect x="10" y="8" width="2" height="8" fill="#FFFFFF"/></svg>`;

function iconFor(src){ return src==='ph' ? phIcon : ycIcon; }

/* SKELETON RENDERER */
function renderSkeleton(){
  const cont = document.getElementById('content');
  let html = `<div class="date-group"><div class="skeleton-text" style="width:100px; margin-bottom:12px;"></div>`;
  // Create 6 dummy cards
  for(let i=0; i<6; i++){
    html += `
    <div class="skeleton-card">
      <div class="skeleton-img"></div>
      <div class="skeleton-lines">
        <div class="skeleton-text" style="width: 40%"></div>
        <div class="skeleton-text" style="width: 70%"></div>
      </div>
    </div>`;
  }
  cont.innerHTML = html + `</div>`;
}

/* MAIN RENDER */
function render(){
  const g=STATE.groups,
        q=(STATE.search||"").toLowerCase().trim(),
        f=STATE.source,
        vm=STATE.view;

  const cont=document.getElementById('content'),
        sum=document.getElementById('summary-text'),
        br=document.getElementById('summary-breakdown');

  const dates=Object.keys(g).sort((a,b)=>b.localeCompare(a));
  let total=0,yc=0,ph=0;
  const rows=[];

  dates.forEach(dt=>{
    g[dt].forEach(r=>{
      const n=pick(r,['Correct Name','CorrectName','Name']);
      if(!n||n==='#VALUE!')return;
      const src=pick(r,['source','Source']).toLowerCase();
      if(f==='yc'&&src!=='yc')return;
      if(f==='ph'&&src!=='ph')return;
      const tag=pick(r,['Correct Tagline','CorrectTagline','Tagline']);
      if(q && !(n+' '+tag).toLowerCase().includes(q))return;

      total++;
      if(src==='yc')yc++;
      if(src==='ph')ph++;

      rows.push({
        dt, n, tag, src,
        site:pick(r,['Website']),
        page:pick(r,['YC URL','YC']),
        logo:companyLogo(r)
      });
    });
  });

  sum.textContent=`Showing ${total} compan${total===1?'y':'ies'}`;
  br.textContent=`YC: ${yc} · PH: ${ph}`;

  if(!rows.length){
    cont.innerHTML=`<div class="empty">No companies match this search/filter.</div>`;
    return;
  }

  if(vm==='table'){
    let h=`<table class="table-view">
      <thead><tr><th>Date</th><th>Company</th><th>Tagline</th><th>Source</th><th></th></tr></thead>
      <tbody>`;
    rows.forEach(x=>{
      const siteHref=x.site? (x.site.startsWith('http')?x.site:`https://${x.site}`):null;
      const pageHref=x.page? (x.page.startsWith('http')?x.page:`https://${x.page}`):null;
      h+=`<tr>
        <td>${esc(formatDate(x.dt))}</td>
        <td class="table-company">${esc(x.n)}</td>
        <td class="table-tagline">${esc(x.tag)}</td>
        <td>${x.src.toUpperCase()}</td>
        <td>
          <div class="card-link-row">
            ${siteHref?`<a class="btn-link" target="_blank" href="${esc(siteHref)}">${siteIcon}</a>`:''}
            ${pageHref?`<a class="btn-link" target="_blank" href="${esc(pageHref)}">${iconFor(x.src)}</a>`:''}
          </div>
        </td>
      </tr>`;
    });
    cont.innerHTML=h+`</tbody></table>`;
  }else{
    const grouped={};
    rows.forEach(r=>{(grouped[r.dt]=grouped[r.dt]||[]).push(r);});
    let out="";
    Object.keys(grouped).sort((a,b)=>b.localeCompare(a)).forEach(d=>{
      out+=`<section class="date-group"><div class="date-header">${esc(formatDate(d))}</div>`;
      grouped[d].forEach(x=>{
        const siteHref=x.site? (x.site.startsWith('http')?x.site:`https://${x.site}`):null;
        const pageHref=x.page? (x.page.startsWith('http')?x.page:`https://${x.page}`):null;
        
        out+=`
        <article class="card">
          <div class="card-left">
            ${x.logo?`<img src="${esc(x.logo)}" loading="lazy" onerror="this.onerror=null;this.parentNode.innerHTML='<div class=\\'card-left-fallback\\'>${esc(x.n[0])}</div>'" alt="">`:`<div class="card-left-fallback">${esc(x.n[0]||'•')}</div>`}
          </div>
          <div class="card-center">
            <div class="card-top-row">
              <div class="card-main">
                <div class="card-name">${esc(x.n)}</div>
                ${x.tag?`<div class="card-tagline">${esc(x.tag)}</div>`:''}
              </div>
              <div class="card-right">
                ${x.src==='yc'?`<div class="yc-pill">YC W26</div>`:''}
                <div class="card-link-row">
                  ${siteHref?`<a class="btn-link" href="${esc(siteHref)}" target="_blank">${siteIcon}</a>`:''}
                  ${pageHref?`<a class="btn-link" href="${esc(pageHref)}" target="_blank">${iconFor(x.src)}</a>`:''}
                </div>
              </div>
            </div>
          </div>
        </article>`;
      });
      out+=`</section>`;
    });
    cont.innerHTML=out;
  }
}

async function load(){
  // 1. Show skeleton immediately
  renderSkeleton();
  
  const lastEl=document.getElementById('last-updated');
  
  try{
    const txt=await (await fetch(CSV_URL)).text();
    const rows=csvToObjects(txt);
    const valid=rows.filter(r=>pick(r,['Correct Name','CorrectName','Name']));
    STATE.groups=groupByDate(valid);
    
    // 2. Render real data
    render();
    
    const d=new Date();
    lastEl.textContent=
      `Synced: ${d.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'})}`;
  }catch(e){
    document.getElementById('content').innerHTML=`<div class="empty">Error: ${esc(e.message)}</div>`;
    lastEl.textContent='Sync failed';
  }
}

/* EVENTS */

// DEBOUNCED SEARCH (300ms)
document.getElementById('search').addEventListener('input', debounce(e => {
  STATE.search = e.target.value;
  render();
}, 300));

document.querySelectorAll('.chip').forEach(c=>{
  c.addEventListener('click',()=>{
    STATE.source=c.dataset.filter;
    document.querySelectorAll('.chip').forEach(x=>x.classList.remove('chip--on'));
    c.classList.add('chip--on');
    render();
  });
});
document.querySelectorAll('.view-btn').forEach(b=>{
  b.addEventListener('click',()=>{
    STATE.view=b.dataset.view;
    document.querySelectorAll('.view-btn').forEach(x=>x.classList.remove('view-btn--active'));
    b.classList.add('view-btn--active');
    render();
  });
});

load();
</script>
</body>
</html>
