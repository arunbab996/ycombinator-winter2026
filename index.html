<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />

<title>DiscoveryOS – New Company Radar</title>

<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect width='64' height='64' fill='%23000000'/%3E%3C/svg%3E">

<style>
:root{
  --bg:#050509;
  --bg-alt:#050713;
  --bg-soft:#0a0a12;
  --shell:#080812;
  --card:#111118;
  --glass:rgba(255,255,255,0.02);
  --muted:#9ca3af;
  --muted-soft:#6b7280;
  --accent:#f97316;
  --accent-soft:rgba(249,115,22,0.2);
  --accent2:#38bdf8;
  --border:#27272f;
  --border-subtle:#1a1b25;
  --tag-bg:#111827;
  --text:#f9fafb;
  --text-soft:#9ca3c9;
  --danger:#fb7185;
  --radius-lg:16px;
  --radius-xl:22px;
  --radius-pill:999px;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
}

*{box-sizing:border-box;}

html,body{
  height:100%;
  margin:0;
  background:
    radial-gradient(circle at top left,#17142b 0,#050509 45%) fixed;
  color:var(--text);
  -webkit-font-smoothing:antialiased;
}

/* page layout */
.page{
  max-width:1180px;
  margin:32px auto 40px;
  padding:0 20px;
  display:flex;
  flex-direction:column;
  gap:20px;
}

/* header / brand */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:18px;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
}

.brand-mark{
  width:40px;
  height:40px;
  border-radius:14px;
  background:
    radial-gradient(circle at 20% 0,#ffffff 0,#e5e7ff 28%,#f97316 52%,#050509 100%);
  position:relative;
  box-shadow:0 16px 40px rgba(0,0,0,0.75);
  overflow:hidden;
}

.brand-mark::after{
  content:"";
  position:absolute;
  inset:7px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,0.75);
  backdrop-filter:blur(16px);
}

.brand-title{
  display:flex;
  flex-direction:column;
  gap:3px;
}

.brand-title h1{
  font-size:18px;
  letter-spacing:0.16em;
  text-transform:uppercase;
  margin:0;
  color:#f9fafb;
}

.brand-sub{
  font-size:11px;
  letter-spacing:0.16em;
  text-transform:uppercase;
  color:var(--text-soft);
}

.nav{
  display:flex;
  align-items:center;
  gap:18px;
  font-size:13px;
  color:var(--text-soft);
}

.nav-link{
  position:relative;
  cursor:pointer;
  padding-bottom:4px;
}

.nav-link::after{
  content:"";
  position:absolute;
  left:0;right:0;bottom:0;
  height:0;
  border-radius:999px;
  background:linear-gradient(90deg,#38bdf8,#f97316);
  transition:height .18s ease-out,opacity .18s ease-out;
  opacity:0;
}

.nav-link:hover::after,
.nav-link--active::after{
  height:2px;
  opacity:1;
}

.nav-cta{
  display:flex;
  align-items:center;
  gap:10px;
}

.nav-cta button{
  border-radius:999px;
  border:1px solid rgba(148,163,184,0.5);
  background:rgba(15,23,42,0.85);
  color:var(--text);
  padding:6px 12px;
  font-size:12px;
  cursor:pointer;
}
.nav-cta button.primary{
  background:linear-gradient(120deg,#38bdf8,#f97316);
  border-color:rgba(248,250,252,0.2);
  box-shadow:0 0 0 1px rgba(15,23,42,0.7),
             0 12px 30px rgba(0,0,0,0.75);
}

/* main shell */
.main-grid{
  display:grid;
  grid-template-columns:minmax(0,0.9fr) minmax(0,1.4fr);
  gap:20px;
}

/* hero */
.hero{
  background:
    radial-gradient(circle at top left,#1e1b3a 0,#050509 60%);
  border-radius:var(--radius-xl);
  padding:18px 18px 16px;
  border:1px solid rgba(148,163,184,0.2);
  box-shadow:0 20px 50px rgba(0,0,0,0.8);
  position:relative;
  overflow:hidden;
}

.hero-pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:5px 11px;
  border-radius:999px;
  border:1px solid rgba(248,250,252,0.2);
  background:rgba(15,23,42,0.9);
  font-size:11px;
  letter-spacing:0.16em;
  text-transform:uppercase;
  color:#e5e7eb;
  margin-bottom:10px;
}

.hero-pill-dot{
  width:6px;
  height:6px;
  border-radius:999px;
  background:#22c55e;
  box-shadow:0 0 10px rgba(34,197,94,0.9);
}

.hero-title{
  font-size:24px;
  line-height:1.22;
  margin:0 0 8px;
}

.hero-title span{
  background:linear-gradient(90deg,#ffffff,#e5e7ff,#f97316);
  -webkit-background-clip:text;
  color:transparent;
}

.hero-copy{
  font-size:13px;
  color:var(--text-soft);
  margin-bottom:16px;
}

.hero-copy strong{
  color:#e5e7eb;
  font-weight:500;
}

.hero-actions{
  display:flex;
  gap:10px;
  margin-bottom:16px;
  flex-wrap:wrap;
}

.btn{
  border-radius:999px;
  padding:8px 14px;
  font-size:12px;
  border:1px solid rgba(148,163,184,0.4);
  background:rgba(15,23,42,0.9);
  color:var(--text);
  cursor:pointer;
}
.btn-primary{
  background:linear-gradient(130deg,#38bdf8,#f97316);
  border-color:rgba(248,250,252,0.25);
  box-shadow:0 0 0 1px rgba(15,23,42,0.7),
             0 13px 32px rgba(0,0,0,0.9);
}
.btn-ghost{
  background:rgba(15,23,42,0.7);
}

.hero-metrics{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  font-size:11px;
}

.metric{
  min-width:110px;
  padding:8px 9px;
  border-radius:12px;
  background:rgba(5,5,12,0.85);
  border:1px solid rgba(75,85,99,0.6);
}

.metric-label{
  text-transform:uppercase;
  letter-spacing:0.12em;
  font-size:9px;
  color:var(--muted-soft);
  margin-bottom:3px;
}
.metric-value{
  font-size:13px;
  font-weight:500;
  display:flex;
  align-items:baseline;
  gap:6px;
}
.metric-pill{
  font-size:10px;
  padding:2px 7px;
  border-radius:999px;
  background:rgba(34,197,94,0.12);
  border:1px solid rgba(34,197,94,0.7);
  color:#bbf7d0;
}

.hero-glow{
  position:absolute;
  right:-40px;
  bottom:-40px;
  width:160px;
  height:160px;
  background:radial-gradient(circle,rgba(56,189,248,0.25),transparent);
  filter:blur(18px);
}

/* product shell (your existing feed lives inside) */
.shell{
  background:var(--shell);
  border-radius:var(--radius-xl);
  padding:14px;
  border:1px solid var(--border-subtle);
  box-shadow:0 20px 60px rgba(0,0,0,0.8);
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* top controls inside shell */
.shell-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:10px;
  padding:4px 2px 6px;
}

.shell-text{
  display:flex;
  flex-direction:column;
  gap:4px;
}

.shell-title{
  font-size:12px;
  text-transform:uppercase;
  letter-spacing:0.16em;
  color:var(--text-soft);
}

.shell-sub{
  font-size:11px;
  color:var(--muted-soft);
}

.shell-meta{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:11px;
  color:var(--text-soft);
}

.shell-pill{
  padding:4px 9px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,0.5);
  background:rgba(15,23,42,0.9);
  display:inline-flex;
  align-items:center;
  gap:6px;
}
.shell-pill-dot{
  width:6px;
  height:6px;
  border-radius:999px;
  background:var(--accent);
  box-shadow:0 0 8px rgba(249,115,22,0.9);
}

/* controls: reuse existing #search input */
.controls-row{
  display:flex;
  align-items:center;
  gap:10px;
  margin-top:6px;
}

.search-wrap{
  flex:1;
  position:relative;
}

.search-icon{
  position:absolute;
  left:10px;
  top:50%;
  transform:translateY(-50%);
  font-size:12px;
  color:var(--muted-soft);
}

.search{
  width:100%;
  margin:0;
  padding:8px 10px 8px 24px;
  border-radius:999px;
  border:1px solid var(--border);
  background:#020617;
  color:var(--text);
  font-size:12px;
}
.search::placeholder{
  color:#4b5563;
}

/* simple filter tags (visual only for now) */
.filter-chips{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  font-size:11px;
}
.chip{
  padding:4px 9px;
  border-radius:999px;
  background:rgba(15,23,42,0.98);
  border:1px solid rgba(55,65,81,0.7);
  color:var(--muted-soft);
}
.chip--on{
  border-color:rgba(248,250,252,0.5);
  background:var(--accent-soft);
  color:#fed7aa;
}

/* your feed container */
.feed-frame{
  margin-top:10px;
  padding:10px;
  border-radius:16px;
  background:var(--card);
  border:1px solid var(--border-subtle);
  box-shadow:0 0 0 1px rgba(0,0,0,0.6);
  max-height:470px;
  overflow:auto;
}

/* date groups + cards (from your existing design, slightly tuned) */
.date-group{ margin-top:18px; }
.date-header{
  font-weight:600;
  color:var(--text);
  margin-bottom:10px;
  font-size:13px;
}

/* cards */
.card{
  display:flex;
  gap:14px;
  align-items:flex-start;
  padding:14px;
  border-radius:12px;
  background:var(--card);
  border:1px solid var(--border);
  box-shadow:0 0 0 1px rgba(0,0,0,0.4);
}

.card + .card{ margin-top:10px; }

.left{
  width:52px;
  height:52px;
  border-radius:14px;
  background:var(--glass);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
}

/* constrain logos */
.left img{
  max-width:44px !important;
  max-height:44px !important;
  width:auto;
  height:auto;
  object-fit:contain !important;
  border-radius:10px;
}

.center{
  flex:1;
  min-width:0;
}

.title-row{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:12px;
}

.name{
  font-weight:600;
  font-size:15px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  color:var(--text);
}

.tagline{
  color:#e5e7eb;
  margin-top:7px;
  font-size:13px;
  line-height:1.3;
}

/* YC W26 tag */
.yc-patch{
  padding:6px 10px;
  border-radius:999px;
  font-size:11px;
  font-weight:600;
  background:rgba(249,115,22,0.12);
  color:#fed7aa;
  border:1px solid rgba(249,115,22,0.6);
  white-space:nowrap;
}

/* actions */
.actions{
  display:flex;
  gap:8px;
  align-items:center;
}

.btn-link{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:6px 8px;
  border-radius:10px;
  font-weight:600;
  text-decoration:none;
  font-size:13px;
  border:1px solid var(--border);
  background:#020617;
  color:#e5e7eb;
  box-shadow:0 0 0 1px rgba(15,23,42,0.5);
}

.btn-link svg{
  width:18px;
  height:18px;
  display:block;
}

.btn--site{
  border-color:#1d4ed8;
}

.btn--page{
  border-color:#7c2d12;
}

/* empty state */
.empty{
  color:var(--muted);
  padding:26px;
  background:#020617;
  border:1px dashed var(--border);
  border-radius:12px;
  text-align:center;
  margin-top:12px;
  font-size:13px;
}

/* footer */
.footer{
  font-size:11px;
  color:var(--muted-soft);
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  border-top:1px solid rgba(15,23,42,0.8);
  padding-top:12px;
}
.footer a{
  color:var(--accent2);
  text-decoration:none;
}

/* responsive */
@media (max-width:960px){
  .main-grid{
    grid-template-columns:minmax(0,1fr);
  }
}

@media (max-width:720px){
  .header{
    flex-direction:column;
    align-items:flex-start;
  }
  .nav{
    flex-wrap:wrap;
  }
}

@media (max-width:640px){
  .title-row{
    flex-direction:column;
    align-items:flex-start;
  }
  .actions{
    margin-top:8px;
  }
}
</style>
</head>

<body>
<div class="page">
  <!-- top nav -->
  <header class="header">
    <div class="brand">
      <div class="brand-mark"></div>
      <div class="brand-title">
        <h1>DISCOVERYOS</h1>
        <div class="brand-sub">New company radar for VCs & analysts</div>
      </div>
    </div>
    <nav class="nav">
      <div class="nav-link nav-link--active">Product</div>
      <div class="nav-link">Use cases</div>
      <div class="nav-link">For funds</div>
      <div class="nav-link">For analysts</div>
      <div class="nav-cta">
        <button>Sign in</button>
        <button class="primary">Request access</button>
      </div>
    </nav>
  </header>

  <main class="main-grid">
    <!-- left: hero copy -->
    <section class="hero">
      <div class="hero-pill">
        <span class="hero-pill-dot"></span>
        Live feed of net-new companies
      </div>
      <h2 class="hero-title">
        Your first look at <span>under-the-radar startups</span>.
      </h2>
      <p class="hero-copy">
        DiscoveryOS tracks <strong>new, unindexed companies</strong> as they
        launch products, hire teams, and quietly ship – so
        <strong>VCs and analysts</strong> can see tomorrow’s pipeline today.
      </p>
      <div class="hero-actions">
        <button class="btn btn-primary">Request early access</button>
        <button class="btn btn-ghost">View sample feed</button>
      </div>
      <div class="hero-metrics">
        <div class="metric">
          <div class="metric-label">New companies / day</div>
          <div class="metric-value">
            100–180
            <span class="metric-pill">Global</span>
          </div>
        </div>
        <div class="metric">
          <div class="metric-label">Signals captured</div>
          <div class="metric-value">Launches · hiring · fundraises</div>
        </div>
        <div class="metric">
          <div class="metric-label">Delivery</div>
          <div class="metric-value">Web · CSV · Slack</div>
        </div>
      </div>
      <div class="hero-glow"></div>
    </section>

    <!-- right: product shell with your actual feed -->
    <section class="shell" aria-label="DiscoveryOS live feed">
      <div class="shell-header">
        <div class="shell-text">
          <div class="shell-title">New companies timeline</div>
          <div class="shell-sub">
            Pulled directly from your DiscoveryOS sheet – grouped by extracted date.
          </div>
          <div class="controls-row">
            <div class="search-wrap">
              <span class="search-icon">⌕</span>
              <!-- MUST keep id="search" for existing JS -->
              <input id="search" class="search" type="text"
                placeholder="Search by company or tagline" />
            </div>
            <div class="filter-chips">
              <span class="chip chip--on">All sources</span>
              <span class="chip">YC</span>
              <span class="chip">Product Hunt</span>
            </div>
          </div>
        </div>
        <div class="shell-meta">
          <div class="shell-pill">
            <span class="shell-pill-dot"></span>
            Updating from sheet
          </div>
        </div>
      </div>

      <div class="feed-frame">
        <!-- MUST keep id="content" for existing JS -->
        <div id="content"></div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <span>© DiscoveryOS – built for funds, analysts, and company scouts.</span>
    <span>
      <a href="#">Product walkthrough</a> ·
      <a href="#">Security</a> ·
      <a href="#">Contact</a>
    </span>
  </footer>
</div>

<script>
/* CONFIG – unchanged */
const SHEET_ID='1OaIx6CeopLNuiYQrDUurO_6B-cCHh3g2QMWtC7UDz5U';
const GID='1778821196';
const CSV_URL=`https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${GID}`;

/*****************
 * ICONS
 *****************/

/* Website icon (matte-friendly) */
const siteIcon=`
<svg width="20" height="20" viewBox="0 0 24 24">
  <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5" fill="none"/>
  <path d="M8 12h8M12 8v8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
</svg>
`;

/* YC Page Icon */
const ycPageIcon=`
<svg width="20" height="20" viewBox="0 0 24 24">
  <rect x="3" y="3" width="18" height="18" rx="4" fill="#FF8A00"/>
  <path d="M9 8l3 4 3-4" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M12 12v4" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/>
</svg>`;

/* PH Page Icon */
const phPageIcon=`
<svg width="20" height="20" viewBox="0 0 24 24">
  <circle cx="12" cy="12" r="10" fill="#FF6A00"/>
  <path d="M9 8h4a3 3 0 0 1 0 6H9V8z" fill="#fff"/>
  <rect x="9" y="8" width="2" height="8" fill="#fff"/>
</svg>`;

/*****************
 * CSV HELPERS
 *****************/
function splitCsvLine(line){
  const out=[]; let cur='', q=false;
  for(let i=0;i<line.length;i++){
    const ch=line[i];
    if(ch==='\"'){
      if(q && line[i+1]==='\"'){cur+='"';i++;continue;}
      q=!q;continue;
    }
    if(ch===',' && !q){out.push(cur);cur='';continue;}
    cur+=ch;
  }
  out.push(cur);
  return out.map(s=>s.trim().replace(/^"|"$/g,''));
}

function csvToObjects(csv){
  const lines = csv.split(/\r?\n/).filter(x=>x.trim());
  if(!lines.length) return [];
  const header = splitCsvLine(lines[0]);
  return lines.slice(1).map(l=>{
    const cols = splitCsvLine(l);
    const o={};
    header.forEach((h,i)=>o[h]=cols[i]||'');
    return o;
  });
}

/*****************
 * UTILS
 *****************/
function pick(r, list){
  for(const k of list){
    if(k in r && r[k] && r[k].trim()) return r[k].trim();
  }
  return "";
}

function getDomain(url){
  try{
    if(!url) return null;
    const u = url.startsWith('http') ? url : `https://${url}`;
    return new URL(u).hostname;
  }catch(e){ return null; }
}

function favicon(url){
  const domain = getDomain(url);
  return domain ? `https://www.google.com/s2/favicons?sz=128&domain=${domain}` : null;
}

/* PH uses Logo URL, YC uses favicon */
function companyLogo(row){
  const src  = pick(row,['source','Source']).toLowerCase();
  const logo = pick(row,['Logo URL','LogoURL','Logo_Url']);
  const site = pick(row,['Website']);

  if(src === 'ph' && logo) return logo;
  return favicon(site);
}

function pageIconFor(src){
  return src === 'ph' ? phPageIcon : ycPageIcon;
}

/*****************
 * DATE
 *****************/
function parseDate(r){
  const d  = pick(r,['Extracted Date','ExtractedDate','Date']);
  const dt = new Date(d);
  return isNaN(dt)? d : dt.toISOString().slice(0,10);
}

function formatDate(d){
  const dt=new Date(d);
  return isNaN(dt)? d : dt.toLocaleDateString(
    undefined,
    {year:'numeric',month:'long',day:'numeric'}
  );
}

function groupByDate(rows){
  const g={};
  rows.forEach(r=>{
    const key=parseDate(r)||'Unknown';
    if(!g[key]) g[key]=[];
    g[key].push(r);
  });
  return g;
}

function esc(s){
  return String(s||'')
    .replace(/&/g,'&amp;')
    .replace(/</g,'&lt;')
    .replace(/>/g,'&gt;');
}

/*****************
 * RENDER
 *****************/
function render(groups, txt){
  const q=(txt||'').toLowerCase();
  const keys=Object.keys(groups).sort((a,b)=>b.localeCompare(a));
  const c=document.getElementById('content');
  let html='';

  keys.forEach(date=>{
    const items = groups[date].filter(r=>{
      const name = pick(r,['Correct Name','CorrectName','Name']);
      const tagline = pick(r,['Correct Tagline','CorrectTagline','Tagline']);
      const src = pick(r,['source','Source']);
      return !q || `${name} ${tagline} ${src}`.toLowerCase().includes(q);
    });

    if(!items.length) return;

    html += `<section class="date-group">
      <div class="date-header">${esc(formatDate(date))}</div>`;

    items.forEach(r=>{
      const name = pick(r,['Correct Name','CorrectName','Name']);
      if(!name || name==='#VALUE!') return;

      const tagline = pick(r,['Correct Tagline','CorrectTagline','Tagline']);
      const src     = pick(r,['source','Source']).toLowerCase();
      const site    = pick(r,['Website']);
      const pageUrl = pick(r,['YC URL','YC']);
      const logo    = companyLogo(r);

      const rightTag = src === 'yc'
        ? `<span class="yc-patch">YC W26</span>`
        : '';

      const pageIcon = pageIconFor(src);

      html += `
      <article class="card">
        <div class="left">
          ${logo
            ? `<img src="${esc(logo)}"
                    alt="${esc(name)} logo"
                    onerror="this.style.display='none'">`
            : `<div>${esc(name[0])}</div>`}
        </div>

        <div class="center">
          <div class="title-row">
            <div style="min-width:0">
              <div class="name">${esc(name)}</div>
              ${tagline ? `<div class="tagline">${esc(tagline)}</div>` : ''}
            </div>

            <div class="actions">
              ${rightTag}

              ${site
                ? `<a class="btn-link btn--site" target="_blank"
                      href="${esc(site.startsWith('http')?site:'https://'+site)}">${siteIcon}</a>`
                : ''}

              ${pageUrl
                ? `<a class="btn-link btn--page" target="_blank"
                      href="${esc(pageUrl.startsWith('http')?pageUrl:'https://'+pageUrl)}">${pageIcon}</a>`
                : ''}
            </div>
          </div>
        </div>
      </article>`;
    });

    html += `</section>`;
  });

  c.innerHTML = html || `<div class="empty">No companies match your search</div>`;
}

/*****************
 * LOAD
 *****************/
async function load(){
  document.getElementById('content').innerHTML =
    `<div class="empty">Loading companies from DiscoveryOS…</div>`;

  try{
    const resp = await fetch(CSV_URL);
    const txt  = await resp.text();
    const rows = csvToObjects(txt);

    const filtered = rows.filter(r=>{
      const name = pick(r,['Correct Name','CorrectName','Name']);
      return name && name !== '#VALUE!';
    });

    const groups = groupByDate(filtered);
    window.__DB = groups;
    render(groups, document.getElementById('search').value);

  }catch(e){
    document.getElementById('content').innerHTML =
      `<div class="empty">${esc(e.message)}</div>`;
  }
}

document.getElementById('search').addEventListener('input',()=>{
  render(window.__DB||{}, document.getElementById('search').value);
});

load();
</script>
</body>
</html>
